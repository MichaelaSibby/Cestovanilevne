<!DOCTYPE html>
<html lang="cs">
<head>
  <meta charset="UTF-8" />
  <title>Cestovanilevne - Počasí podle země a města</title>
  <style>
    body { font-family: Arial, sans-serif; max-width: 900px; margin: auto; padding: 20px; background: #f0f8ff; }
    h1, h2 { color: #004080; }
    section { margin-bottom: 40px; }
    .weather-box { background: #d9e6f2; padding: 15px; border-radius: 8px; }
    select { font-size: 1.1em; padding: 5px; margin-right: 10px; }
  </style>
</head>
<body>
  <h1>Cestovanilevne</h1>
  <p>Vyberte zemi a město pro zobrazení aktuálního počasí.</p>

  <section id="weather-section">
    <h2>Aktuální počasí</h2>
    <label for="countrySelect">Země:</label>
    <select id="countrySelect">
      <option value="">-- Vyber zemi --</option>
      <option value="cz">Česká republika</option>
      <option value="us">USA</option>
      <option value="gb">Velká Británie</option>
      <option value="jp">Japonsko</option>
      <option value="au">Austrálie</option>
    </select>

    <label for="citySelect">Město:</label>
    <select id="citySelect" disabled>
      <option value="">-- Nejprve vyber zemi --</option>
    </select>

    <div class="weather-box" id="weather">
      Vyberte zemi a město pro zobrazení počasí.
    </div>
  </section>

  <script>
    const apiKey = "TVUJ_API_KLIC_ZDE";
    const weatherDiv = document.getElementById("weather");
    const countrySelect = document.getElementById("countrySelect");
    const citySelect = document.getElementById("citySelect");

    // Města podle zemí (přidej další podle potřeby)
    const citiesByCountry = {
      cz: ["Praha", "Brno", "Ostrava"],
      us: ["New York", "Los Angeles", "Chicago"],
      gb: ["London", "Manchester", "Edinburgh"],
      jp: ["Tokyo", "Osaka", "Kyoto"],
      au: ["Sydney", "Melbourne", "Brisbane"]
    };

    countrySelect.addEventListener("change", () => {
      const country = countrySelect.value;
      citySelect.innerHTML = "";
      if (!country) {
        citySelect.disabled = true;
        citySelect.innerHTML = '<option value="">-- Nejprve vyber zemi --</option>';
        weatherDiv.textContent = "Vyberte zemi a město pro zobrazení počasí.";
        return;
      }
      citySelect.disabled = false;
      const cities = citiesByCountry[country] || [];
      cities.forEach(city => {
        const option = document.createElement("option");
        option.value = city;
        option.textContent = city;
        citySelect.appendChild(option);
      });
      weatherDiv.textContent = "Vyberte město pro zobrazení počasí.";
    });

    citySelect.addEventListener("change", () => {
      const city = citySelect.value;
      if (!city) {
        weatherDiv.textContent = "Vyberte město pro zobrazení počasí.";
        return;
      }
      fetchWeather(city);
    });

    function fetchWeather(city) {
      weatherDiv.textContent = "Načítám počasí...";
      fetch(`https://api.openweathermap.org/data/2.5/weather?q=${city}&units=metric&lang=cz&appid=${apiKey}`)
        .then(response => response.json())
        .then(data => {
          if (data.cod !== 200) {
            weatherDiv.textContent = "Počasí pro toto město nebylo nalezeno.";
            return;
          }
          weatherDiv.innerHTML = `
            <p><strong>Město:</strong> ${data.name}</p>
            <p><strong>Teplota:</strong> ${data.main.temp} °C</p>
            <p><strong>Počasí:</strong> ${data.weather[0].description}</p>
            <p><strong>Vítr:</strong> ${data.wind.speed} m/s</p>
          `;
        })
        .catch(() => {
          weatherDiv.textContent = "Nepodařilo se načíst počasí.";
        });
    }
  </script>
</body>
</html>
